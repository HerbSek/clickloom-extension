<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>WebRequest Navigation Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
    h1 {
      color: #333;
    }
    .test-section {
      margin-bottom: 30px;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
    }
    .test-links {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    a {
      color: #0066cc;
      text-decoration: none;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 3px;
      display: inline-block;
    }
    a:hover {
      background-color: #f0f0f0;
      text-decoration: underline;
    }
    .description {
      color: #666;
      margin-bottom: 10px;
    }
    .test-button {
      background-color: #007cba;
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      margin: 5px;
    }
    .test-button:hover {
      background-color: #005a87;
    }
  </style>
</head>
<body>
  <h1>Complete Navigation Blocking Test</h1>
  <p>This page tests comprehensive navigation blocking using declarativeNetRequest. ALL navigation should be blocked and show the ClickLoom popup.</p>

  <div class="test-section">
    <h2>Direct Navigation Links</h2>
    <p class="description">These links should be blocked by declarativeNetRequest and show the ClickLoom popup.</p>
    <div class="test-links">
      <a href="https://www.google.com">Google (should be intercepted)</a>
      <a href="https://www.github.com">GitHub (should be intercepted)</a>
      <a href="https://www.example.com">Example.com (should be intercepted)</a>
    </div>
  </div>

  <div class="test-section">
    <h2>JavaScript Navigation</h2>
    <p class="description">Test programmatic navigation that should be blocked by declarativeNetRequest.</p>
    <button class="test-button" onclick="navigateToUrl('https://www.reddit.com')">Navigate to Reddit</button>
    <button class="test-button" onclick="navigateToUrl('https://www.stackoverflow.com')">Navigate to Stack Overflow</button>
    <button class="test-button" onclick="window.open('https://www.youtube.com', '_self')">Navigate to YouTube</button>
  </div>

  <div class="test-section">
    <h2>Special Protocols</h2>
    <p class="description">These should NOT be intercepted.</p>
    <div class="test-links">
      <a href="mailto:test@example.com">Email Link (should not be intercepted)</a>
      <a href="tel:+1234567890">Phone Link (should not be intercepted)</a>
      <a href="javascript:alert('Hello!')">JavaScript Link (should not be intercepted)</a>
    </div>
  </div>

  <div class="test-section">
    <h2>Address Bar Simulation</h2>
    <p class="description">Test navigation that simulates typing in address bar.</p>
    <button class="test-button" onclick="simulateAddressBar('https://www.twitter.com')">Simulate Address Bar Navigation</button>
    <button class="test-button" onclick="window.location.assign('https://www.instagram.com')">Location.assign() Test</button>
    <button class="test-button" onclick="window.location.replace('https://www.linkedin.com')">Location.replace() Test</button>
  </div>

  <div class="test-section">
    <h2>Extension Pages</h2>
    <p class="description">Extension pages should not be intercepted.</p>
    <button class="test-button" onclick="openExtensionPage()">Open Extension Test Page</button>
  </div>

  <script>
    function navigateToUrl(url) {
      console.log('Programmatically navigating to:', url);
      window.location.href = url;
    }

    function simulateAddressBar(url) {
      console.log('Simulating address bar navigation to:', url);
      // This simulates what happens when user types in address bar
      window.location.href = url;
    }

    function openExtensionPage() {
      // This should not be intercepted
      const extensionUrl = chrome.runtime.getURL('test.html');
      window.location.href = extensionUrl;
    }

    // Log when page loads
    console.log('WebRequest test page loaded');
    
    // Test form submission (should also be intercepted)
    function createTestForm() {
      const form = document.createElement('form');
      form.method = 'GET';
      form.action = 'https://www.wikipedia.org';
      
      const submitBtn = document.createElement('button');
      submitBtn.type = 'submit';
      submitBtn.textContent = 'Submit Form to Wikipedia (should be intercepted)';
      submitBtn.className = 'test-button';
      
      form.appendChild(submitBtn);
      
      const formSection = document.createElement('div');
      formSection.className = 'test-section';
      formSection.innerHTML = '<h2>Form Submission Test</h2><p class="description">Form submissions should also be intercepted.</p>';
      formSection.appendChild(form);
      
      document.body.appendChild(formSection);
    }
    
    // Add form test after page loads
    setTimeout(createTestForm, 1000);
  </script>
</body>
</html>
