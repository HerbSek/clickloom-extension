<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="styles.css">
  <script src="axios.min.js"></script>
</head>
<body>
  <div class="container">
    <!-- Initial Screen -->
    <div class="initial-screen active">
      <h2>🔒 Link Blocked</h2>
      <p>ClickLoom has blocked navigation to:</p>
      <div class="url" id="urlToScan"></div>
      
      <!-- Domain Trust Status -->
      <div class="domain-status" id="domainStatus" style="display: none;">
        <div class="status-trusted" id="statusTrusted" style="display: none;">
          ✅ <strong>Domain Already Trusted</strong><br>
          <small>This domain and all its sublinks are trusted. You can proceed safely.</small>
          <div class="domain-info" id="domainInfoTrusted"></div>
        </div>
        <div class="status-new" id="statusNew" style="display: none;">
          ⚠️ <strong>New Domain</strong><br>
          <small>This domain hasn't been scanned before. Consider checking its safety.</small>
          <div class="domain-info" id="domainInfoNew"></div>
        </div>
      </div>
      
      <p>What would you like to do?</p>
      <div class="button-group">
        <button class="btn-proceed" id="startScan">🔍 Check Link Safety</button>
        <button class="btn-cancel" id="cancelScan">➡️ Proceed Directly</button>
      </div>
      
      <!-- Refresh Domain Status Button -->
      <div class="refresh-section">
        <button class="btn-refresh" id="refreshDomainStatus">🔄 Refresh Domain Status</button>
      </div>
      
      <!-- Debug Information -->
      <div class="debug-section" id="debugSection" style="display: none;">
        <div class="debug-header">
          <h4>🔍 Debug Info</h4>
          <button class="btn-toggle-debug" id="toggleDebug">Hide Debug</button>
        </div>
        <div class="debug-content" id="debugContent"></div>
      </div>
      

    </div>

    <!-- Loading Screen -->
    <div class="loading" style="display: none;">
      <div class="spinner"></div>
      <div>Scanning website for security threats...</div>
      <div class="small-text">This may take a few seconds</div>
    </div>

    <!-- Results Screen -->
    <div class="results-screen">
      <div class="verdict">
        <span class="verdict-icon">✓</span>
        <span class="verdict-text">Safe</span>
      </div>

      <div class="url" id="scannedUrl"></div>

      <div class="risk-score">
        <div>Risk Score</div>
        <div class="score-bar">
          <div class="score-fill" style="width: 0%"></div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Analysis</div>
        <div class="info-grid">
          <div class="info-item">
            <strong>Total Scripts:</strong>
            <span id="totalScripts">0</span>
          </div>
          <div class="info-item">
            <strong>External Scripts:</strong>
            <span id="externalScripts">0</span>
          </div>
          <div class="info-item">
            <strong>Total Links:</strong>
            <span id="totalLinks">0</span>
          </div>
          <div class="info-item">
            <strong>External Links:</strong>
            <span id="externalLinks">0</span>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Summary</div>
        <div class="summary-text" id="summary"></div>
      </div>

      <div class="section">
        <div class="section-title">Text Analysis</div>
        <div class="text-findings" id="textFindings"></div>
      </div>

      <div class="section">
        <div class="section-title">Script Analysis</div>
        <div class="script-details" id="scriptDetails"></div>
      </div>

      <div class="section">
        <div class="section-title">Link Analysis</div>
        <div class="link-details" id="linkDetails"></div>
      </div>

      <div class="section">
        <div class="section-title">Recommendations</div>
        <div class="recommendations" id="recommendations"></div>
      </div>

      <div class="button-group">
        <button class="btn-proceed" id="proceedToSite">✅ Proceed to Website</button>
        <button class="btn-cancel" id="goBack">❌ Cancel & Stay Here</button>
      </div>
    </div>
  </div>
  <script src="popup.js"></script>
</body>
</html> 